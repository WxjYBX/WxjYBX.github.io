<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="linux的嵌入式开发第三步，学习linux-ARM相关开发，使用MPU为：I.MX6ULL">
<meta property="og:type" content="article">
<meta property="og:title" content="嵌入式linux入门(三)：linux-ARM裸机一">
<meta property="og:url" content="http://example.com/2023/12/04/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="linux的嵌入式开发第三步，学习linux-ARM相关开发，使用MPU为：I.MX6ULL">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-12-04T08:49:07.353Z">
<meta property="article:modified_time" content="2023-12-26T05:00:48.230Z">
<meta property="article:author" content="WxjYBX">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2023/12/04/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2023/12/04/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/","path":"2023/12/04/嵌入式/linux/正点原子/I.MX6ULL裸机开发/","title":"嵌入式linux入门(三)：linux-ARM裸机一"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>嵌入式linux入门(三)：linux-ARM裸机一 | Hexo</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-LED%E7%82%B9%E4%BA%AE-%E6%B1%87%E7%BC%96%E8%BF%87%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">1. LED点亮(汇编过程)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">1.1.</span> <span class="nav-text">1.1. 基本流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99"><span class="nav-number">1.2.</span> <span class="nav-text">1.2. 汇编代码编写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="nav-number">1.3.</span> <span class="nav-text">1.3. 编译过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E8%AF%91-c-x2F-s-gt-o"><span class="nav-number">1.3.1.</span> <span class="nav-text">编译(.c&#x2F;.s-&gt;.o)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%93%BE%E6%8E%A5-o-gt-elf"><span class="nav-number">1.3.2.</span> <span class="nav-text">链接(.o-&gt;.elf)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%BA%E4%BB%B6%E7%94%9F%E6%88%90-elf-gt-bin"><span class="nav-number">1.3.3.</span> <span class="nav-text">固件生成(.elf-&gt;.bin)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8D%E6%B1%87%E7%BC%96-elf-gt-dis"><span class="nav-number">1.3.4.</span> <span class="nav-text">反汇编(.elf-&gt;.dis)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Makefile"><span class="nav-number">1.3.5.</span> <span class="nav-text">Makefile</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E7%83%A7%E5%BD%95"><span class="nav-number">1.3.6.</span> <span class="nav-text">1.4. 烧录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-LED%E9%97%AA%E7%83%81-%E6%B1%87%E7%BC%96-C"><span class="nav-number">2.</span> <span class="nav-text">2. LED闪烁(汇编+C)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E9%A9%B1%E5%8A%A8%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="nav-number">2.1.</span> <span class="nav-text">2.1. 驱动文件编写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%BA%93%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">2.2. 库文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-main-c"><span class="nav-number">2.3.</span> <span class="nav-text">2.3. main.c</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-Makefile"><span class="nav-number">2.4.</span> <span class="nav-text">2.4. Makefile</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E9%93%BE%E6%8E%A5%E8%84%9A%E6%9C%AC"><span class="nav-number">2.4.1.</span> <span class="nav-text">无链接脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E9%93%BE%E6%8E%A5%E8%84%9A%E6%9C%AC"><span class="nav-number">2.4.2.</span> <span class="nav-text">有链接脚本</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E9%93%BE%E6%8E%A5%E8%84%9A%E6%9C%ACimx6ull-lds"><span class="nav-number">2.5.</span> <span class="nav-text">2.5. 链接脚本imx6ull.lds</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8stm32%E9%A9%B1%E5%8A%A8%E6%A0%BC%E5%BC%8F%E7%BC%96%E5%86%99"><span class="nav-number">3.</span> <span class="nav-text">3. 使用stm32驱动格式编写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91"><span class="nav-number">3.1.</span> <span class="nav-text">驱动开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E9%A9%B1%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="nav-number">3.2.</span> <span class="nav-text">3.1. 驱动文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%BA%93%E6%96%87%E4%BB%B6"><span class="nav-number">3.3.</span> <span class="nav-text">3.2. 库文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Makefile"><span class="nav-number">3.4.</span> <span class="nav-text">3.3. Makefile</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%AE%98%E6%96%B9sdk%E7%A7%BB%E6%A4%8D"><span class="nav-number">4.</span> <span class="nav-text">4. 官方sdk移植</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E6%A4%8D%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.1.</span> <span class="nav-text">移植步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-BSP%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">5. BSP工程管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E9%80%9A%E7%94%A8Makefile"><span class="nav-number">5.1.</span> <span class="nav-text">5.1. 通用Makefile</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E8%9C%82%E9%B8%A3%E5%99%A8"><span class="nav-number">6.</span> <span class="nav-text">6. 蜂鸣器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">6.1.</span> <span class="nav-text">6.1. 基本流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99"><span class="nav-number">6.2.</span> <span class="nav-text">6.2. 代码编写</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#c-cpp-properties-json"><span class="nav-number">6.2.1.</span> <span class="nav-text">c_cpp_properties.json</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#beep-h"><span class="nav-number">6.2.2.</span> <span class="nav-text">beep.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#beep-c"><span class="nav-number">6.2.3.</span> <span class="nav-text">beep.c</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E6%8C%89%E9%94%AE%E8%BE%93%E5%85%A5"><span class="nav-number">7.</span> <span class="nav-text">7. 按键输入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">7.1.</span> <span class="nav-text">7.1. 基本流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99"><span class="nav-number">7.2.</span> <span class="nav-text">7.2. 代码编写</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8GPIO%E4%BB%A3%E7%A0%81"><span class="nav-number">7.2.1.</span> <span class="nav-text">通用GPIO代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%E4%BB%A3%E7%A0%81"><span class="nav-number">7.2.2.</span> <span class="nav-text">按键代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="nav-number">7.3.</span> <span class="nav-text">7.3. 问题解决</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%85%E9%99%A4BSS%E6%AE%B5%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%A8%8B%E5%BA%8F%E5%8D%A1%E6%AD%BB"><span class="nav-number">7.3.1.</span> <span class="nav-text">清除BSS段的代码会导致程序卡死</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">7.3.1.1.</span> <span class="nav-text">解决办法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E5%A2%9EGPIO%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3%E4%B9%8B%E5%90%8E%EF%BC%8C%E4%BC%9A%E5%AF%BC%E8%87%B4-bss-start%E5%92%8C-bss-end%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB-%E5%8E%9F%E7%90%86%E6%9C%AA%E7%9F%A5"><span class="nav-number">7.3.2.</span> <span class="nav-text">新增GPIO通用接口之后，会导致_bss_start和 _bss_end无法识别(原理未知)</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">WxjYBX</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/12/04/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WxjYBX">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="嵌入式linux入门(三)：linux-ARM裸机一 | Hexo">
      <meta itemprop="description" content="linux的嵌入式开发第三步，学习linux-ARM相关开发，使用MPU为：I.MX6ULL">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          嵌入式linux入门(三)：linux-ARM裸机一
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-04 16:49:07" itemprop="dateCreated datePublished" datetime="2023-12-04T16:49:07+08:00">2023-12-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-12-26 13:00:48" itemprop="dateModified" datetime="2023-12-26T13:00:48+08:00">2023-12-26</time>
    </span>

  
</div>

            <div class="post-description">linux的嵌入式开发第三步，学习linux-ARM相关开发，使用MPU为：I.MX6ULL</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="1-LED点亮-汇编过程"><a href="#1-LED点亮-汇编过程" class="headerlink" title="1. LED点亮(汇编过程)"></a>1. LED点亮(汇编过程)</h2><h3 id="1-1-基本流程"><a href="#1-1-基本流程" class="headerlink" title="1.1. 基本流程"></a>1.1. 基本流程</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1-》使能GPIO的时钟信号</span><br><span class="line">	时钟控制寄存器：CCM_CCGR0-6</span><br><span class="line">2-》设置GPIO复用，设置功能</span><br><span class="line">	设置IO功能为GPIO，IO寄存器：IOMUXC_SW_MUX_CTL_PAD_GPIO1_IO03</span><br><span class="line">3-》配置GPIO电气属性(压摆率(电平转换速率)、传输速率、驱动能力、输入/输出模式)</span><br><span class="line">	设置IO电气属性，IO寄存器：IOMUXC_SW_PAD_CTL_PAD_GPIO1_IO03</span><br><span class="line">4-》使能GPIO引脚，输出高/低电平</span><br><span class="line">	配置GPIOx_GDIR寄存器:设置GPIO模式为输入/输出</span><br><span class="line">	配置GPIOx_DR寄存器:  设置GPIO输出数据</span><br></pre></td></tr></table></figure>

<h3 id="1-2-汇编代码编写"><a href="#1-2-汇编代码编写" class="headerlink" title="1.2. 汇编代码编写"></a>1.2. 汇编代码编写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 創建一個點燈程序的驅動文件</span><br><span class="line"> * 實現效果爲：</span><br><span class="line"> *    初始化GPIO3接口，並且輸出低電平使LED亮起</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">@.global 定义一个全局符号</span><br><span class="line">.global _start</span><br><span class="line"></span><br><span class="line">@汇编程序的默认入口标号是_start</span><br><span class="line">_start:</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR0初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR0寄存器地址：0x020c4068</span><br><span class="line">            使能當前寄存器控制的所有時鐘信號：0xffffffff</span><br><span class="line">            str：將r1寄存器中的值存儲到r0寄存器中存儲的值所對應的地址的寄存器中</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c4068</span><br><span class="line">    ldr r1, =0xffffffff</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR1初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR1寄存器地址：0x020c406c</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c406c</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR2初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR2寄存器地址：0x020c4070</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c4070</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR3初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR3寄存器地址：0x020c4074</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c4074</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR4初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR4寄存器地址：0x020c4078</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c4078</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR5初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR1寄存器地址：0x020c407c</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c407c</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：CCM_CCGR6初始化</span><br><span class="line">        指令含義：</span><br><span class="line">            CCM_CCGR6寄存器地址：0x020c4080</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020c4080</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：配置IOMUXC_SW_MUX_CTL_PAD_GPIO1_IO03的IO模式爲GPIO1_IO03</span><br><span class="line">        指令含義：</span><br><span class="line">            IOMUXC_SW_MUX_CTL_PAD_GPIO1_IO03地址：0x020e0068</span><br><span class="line">            復用IO設置爲GPIO1_IO03模式：0101</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020e0068</span><br><span class="line">    ldr r1, =0x5</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    功能：配置IOMUXC_SW_PAD_CTL_PAD_GPIO1_IO03的各項屬性</span><br><span class="line">    指令含義：</span><br><span class="line">        IOMUXC_SW_PAD_CTL_PAD_GPIO1_IO03地址：0x020e02f4</span><br><span class="line">        bit0:       0 低轉換速率</span><br><span class="line">        bit3:5:     110 R0/6驅動能力</span><br><span class="line">        bit6:7:     10 IO速率中速 100M</span><br><span class="line">        bit11:      0 關閉開路輸出</span><br><span class="line">        bit12:      1 使能上下拉/狀態保持器</span><br><span class="line">        bit13:      0 bit12控制的是狀態保持器（1 bit12控制上下拉）</span><br><span class="line">        bit14:15:   00 100K下拉電阻</span><br><span class="line">        bit16:      0 禁止遲滯比較器</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x020e02f4</span><br><span class="line">    ldr r1, =0x10b0</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    功能：配置GPIO1_IO03爲輸出模式</span><br><span class="line">    指令含義：</span><br><span class="line">        GPIO1_GDIR地址：0x0209c004</span><br><span class="line">        bit3： 1 GPIO1_IO03配置爲輸出模式</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x0209c004</span><br><span class="line">    ldr r1, =0x00000008</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    功能：配置GPIO1_IO03輸出內容爲低電平</span><br><span class="line">    指令含義：</span><br><span class="line">        GPIO1_DR地址：0x0209c000</span><br><span class="line">        bit3: 0 GPIO1_IO03輸出低電平</span><br><span class="line">     */</span><br><span class="line">    ldr r0, =0x0209c000</span><br><span class="line">    ldr r1, =0</span><br><span class="line">    str r1, [r0]</span><br><span class="line"></span><br><span class="line">@loop死循環</span><br><span class="line">loop:</span><br><span class="line">    b loop</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-编译过程"><a href="#1-3-编译过程" class="headerlink" title="1.3. 编译过程"></a>1.3. 编译过程</h3><h4 id="编译-c-x2F-s-gt-o"><a href="#编译-c-x2F-s-gt-o" class="headerlink" title="编译(.c&#x2F;.s-&gt;.o)"></a>编译(.c&#x2F;.s-&gt;.o)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-linux-gnueabihf-gcc -c leds.s -o leds.o</span><br></pre></td></tr></table></figure>

<h4 id="链接-o-gt-elf"><a href="#链接-o-gt-elf" class="headerlink" title="链接(.o-&gt;.elf)"></a>链接(.o-&gt;.elf)</h4><p><strong>链接时需要指定链接的起始地址，即代码运行的起始地址</strong> <em>(一般情况下也是代码保存的地方)</em></p>
<p>链接起始地址一般指向RAM或者Flash，RAM分为内部RAM和外部RAM，一般外部RAM更大，会存储在外部RAM中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-linux-gnueabihf-ld -Ttext 0x87800000 leds.o -o leds.elf</span><br></pre></td></tr></table></figure>

<h4 id="固件生成-elf-gt-bin"><a href="#固件生成-elf-gt-bin" class="headerlink" title="固件生成(.elf-&gt;.bin)"></a>固件生成(.elf-&gt;.bin)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-linux-gnueabihf-objcopy -O binary -S -g leds.elf leds.bin</span><br></pre></td></tr></table></figure>

<h4 id="反汇编-elf-gt-dis"><a href="#反汇编-elf-gt-dis" class="headerlink" title="反汇编(.elf-&gt;.dis)"></a>反汇编(.elf-&gt;.dis)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-linux-gnueabihf-objdump -D leds.elf &gt; leds.dis</span><br></pre></td></tr></table></figure>

<h4 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">leds.bin: leds.s</span><br><span class="line">	arm-linux-gnueabihf-gcc -c leds.s -o leds.o</span><br><span class="line">	arm-linux-gnueabihf-ld -Ttext 0x87800000 leds.o -o leds.elf</span><br><span class="line">	arm-linux-gnueabihf-objcopy -O binary -S -g leds.elf leds.bin</span><br><span class="line">	arm-linux-gnueabihf-objdump -D leds.elf &gt; leds.dis</span><br><span class="line">	</span><br><span class="line">clean:</span><br><span class="line">	rm -rf *.o leds.elf leds.bin leds.dis</span><br></pre></td></tr></table></figure>

<h4 id="1-4-烧录"><a href="#1-4-烧录" class="headerlink" title="1.4. 烧录"></a>1.4. 烧录</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1-》将imxdownload文件放在与bin文件同级的目录下</span><br><span class="line">2-》给予imxdownload文件权限</span><br><span class="line">	chmod 777 imxdownload</span><br><span class="line">3-》准备SD卡(SD卡在烧写时可能被格式化)</span><br><span class="line">4-》烧写bin文件到SD卡</span><br><span class="line">	./imxdownload leds.bin /dev/sdd(这里填自己的SD卡的路径)</span><br></pre></td></tr></table></figure>

<h2 id="2-LED闪烁-汇编-C"><a href="#2-LED闪烁-汇编-C" class="headerlink" title="2. LED闪烁(汇编+C)"></a>2. LED闪烁(汇编+C)</h2><h3 id="2-1-驱动文件编写"><a href="#2-1-驱动文件编写" class="headerlink" title="2.1. 驱动文件编写"></a>2.1. 驱动文件编写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">    MAIN驅動程序：</span><br><span class="line">        1.設置處理器模式爲：SVC</span><br><span class="line">        2.設置sp指針</span><br><span class="line">        3.跳轉到C語言main函數</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"> .global _start</span><br><span class="line"></span><br><span class="line"> _start:</span><br><span class="line">    /*</span><br><span class="line">        功能：設置處理器模式爲SVC模式</span><br><span class="line">        指令含義：</span><br><span class="line">            CPSR：程序狀態寄存器，用於設置處理器模式，其中M[4:0]是處理器模式控制位</span><br><span class="line">                SVC模式下爲：10011（需要注意：不應該變動寄存器的其他位數據，只是將這5位清零再賦值）</span><br><span class="line">     */</span><br><span class="line">    mrs r0, cpsr        @將cpsr寄存器中的數據複製到r0寄存器中</span><br><span class="line">    bic r0, r0, #0x1f   @將r0寄存器中數據的最後5位清零</span><br><span class="line">    orr r0, r0, #0x13   @將r0寄存器中數據的最後5位賦值爲10011</span><br><span class="line">    msr cpsr, r0        @將r0寄存器中的數據複製到cpsr寄存器</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：設置sp指針的指向位置，並跳轉到c語言main函數</span><br><span class="line">     */</span><br><span class="line">     ldr sp, =0x80200000    @設置棧指針sp</span><br><span class="line">     b main                 @跳轉到main</span><br></pre></td></tr></table></figure>

<h3 id="2-2-库文件"><a href="#2-2-库文件" class="headerlink" title="2.2. 库文件"></a>2.2. 库文件</h3><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __LED_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __LED_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定義需要使用到的時鐘控制寄存器CCM_CCGR0-6</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR0           (*((volatile unsigned int *)0x020c4068))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR1           (*((volatile unsigned int *)0x020c406c))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR2           (*((volatile unsigned int *)0x020c4070))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR3           (*((volatile unsigned int *)0x020c4074))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR4           (*((volatile unsigned int *)0x020c4078))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR5           (*((volatile unsigned int *)0x020c407c))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_CCGR6           (*((volatile unsigned int *)0x020c4080))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定義需要配置的IO寄存器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SW_MUX_GPIO1_IO03   (*((volatile unsigned int *)0x020e0068))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SW_PAD_GPIO1_IO03   (*((volatile unsigned int *)0x020e02f4))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定義GPIO各項配置所需要的寄存器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_DR            (*((volatile unsigned int *)0x0209c000))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_GDIR          (*((volatile unsigned int *)0x0209c004))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_PSR           (*((volatile unsigned int *)0x0209c008))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_ICR1          (*((volatile unsigned int *)0x0209c00c))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_ICR2          (*((volatile unsigned int *)0x0209c010))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_IMR           (*((volatile unsigned int *)0x0209c014))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_ISR           (*((volatile unsigned int *)0x0209c018))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_EDGE_SEL      (*((volatile unsigned int *)0x0209c01c))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// !__LED_H</span></span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-main-c"><a href="#2-3-main-c" class="headerlink" title="2.3. main.c"></a>2.3. main.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;led.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">clk_init</span><span class="params">()</span>&#123;</span><br><span class="line">    CCM_CCGR0 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR1 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR2 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR3 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR4 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR5 = <span class="number">0xffffffff</span>;</span><br><span class="line">    CCM_CCGR6 = <span class="number">0xffffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">led_init</span><span class="params">()</span>&#123;</span><br><span class="line">    SW_MUX_GPIO1_IO03 = <span class="number">0x5</span>;<span class="comment">//IO復用爲GPIO</span></span><br><span class="line">    SW_PAD_GPIO1_IO03 = <span class="number">0x10b0</span>;<span class="comment">//電氣特性配置</span></span><br><span class="line"></span><br><span class="line">    GPIO1_GDIR = <span class="number">0x8</span>;<span class="comment">//GPIO設置爲輸出模式</span></span><br><span class="line">    GPIO1_DR = <span class="number">0</span>;<span class="comment">//GPIO設置輸出低電平</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay_us</span><span class="params">(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (n--)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay_ms</span><span class="params">(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//根據主頻來判定n爲多少，主頻396M時爲0x7ff</span></span><br><span class="line">        delay_us(<span class="number">0x7ff</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">led_on</span><span class="params">()</span>&#123;</span><br><span class="line">    GPIO1_DR &amp;= ~(<span class="number">1</span>&lt;&lt;<span class="number">3</span>);<span class="comment">//bit3清零</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">led_off</span><span class="params">()</span>&#123;</span><br><span class="line">    GPIO1_DR |= (<span class="number">1</span>&lt;&lt;<span class="number">3</span>);<span class="comment">//bit3置1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    clk_init();<span class="comment">//時鐘初始化</span></span><br><span class="line">    led_init();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        led_on();</span><br><span class="line">        delay_ms(<span class="number">500</span>);</span><br><span class="line">        led_off();</span><br><span class="line">        delay_ms(<span class="number">500</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-4-Makefile"><a href="#2-4-Makefile" class="headerlink" title="2.4. Makefile"></a>2.4. Makefile</h3><h4 id="无链接脚本"><a href="#无链接脚本" class="headerlink" title="无链接脚本"></a>无链接脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">objs = start.o main.o</span><br><span class="line"></span><br><span class="line">ledc.bin: $(objs)</span><br><span class="line">	arm-linux-gnueabihf-ld -Ttext 0x87800000 $^ -o ledc.elf</span><br><span class="line">	arm-linux-gnueabihf-objcopy -O binary -S -g ledc.elf $@</span><br><span class="line">	arm-linux-gnueabihf-objdump -D -m arm ledc.elf &gt; ledc.dis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o: %.c</span></span><br><span class="line">	arm-linux-gnueabihf-gcc -Wall -nostdlib -c $&lt; -o $@</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o: %.s</span></span><br><span class="line">	arm-linux-gnueabihf-gcc -Wall -nostdlib -c $&lt; -o $@</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">	rm -rf *.o ledc.elf ledc.bin ledc.dis</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="有链接脚本"><a href="#有链接脚本" class="headerlink" title="有链接脚本"></a>有链接脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">objs = start.o main.o</span><br><span class="line"></span><br><span class="line">ledc.bin: $(objs)</span><br><span class="line">	arm-linux-gnueabihf-ld -Timx6ull.lds $^ -o ledc.elf</span><br><span class="line">	arm-linux-gnueabihf-objcopy -O binary -S -g ledc.elf $@</span><br><span class="line">	arm-linux-gnueabihf-objdump -D -m arm ledc.elf &gt; ledc.dis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o: %.c</span></span><br><span class="line">	arm-linux-gnueabihf-gcc -Wall -nostdlib -O2 -c $&lt; -o $@</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o: %.s</span></span><br><span class="line">	arm-linux-gnueabihf-gcc -Wall -nostdlib -O2 -c $&lt; -o $@</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">	rm -rf *.o ledc.elf ledc.bin ledc.dis</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-5-链接脚本imx6ull-lds"><a href="#2-5-链接脚本imx6ull-lds" class="headerlink" title="2.5. 链接脚本imx6ull.lds"></a>2.5. 链接脚本imx6ull.lds</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SECTIONS&#123;</span><br><span class="line">    . = 0x87800000;</span><br><span class="line">    .text : &#123;</span><br><span class="line">        start.o</span><br><span class="line">        *(.text)</span><br><span class="line">    &#125;</span><br><span class="line">    .rodata ALIGN(4) : &#123;*(.rodata*)&#125;</span><br><span class="line">    .data : &#123;*(.data)&#125;</span><br><span class="line">    __bss_start = .;</span><br><span class="line">    .bss ALIGN(4) : &#123;*(.bss) *(COMMON)&#125;</span><br><span class="line">    __bss_end = .;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">. = 0x87800000;</span><br><span class="line">这一行表示将当前位置标识符.设置为内存地址0x87800000。在链接过程中，.通常代表当前的链接地址。</span><br><span class="line"></span><br><span class="line">.text : &#123; start.o *(.text) &#125;</span><br><span class="line">这里定义了一个名为.text的section，用于存放程序的可执行指令。start.o是一个特殊的目标文件，可能包含程序的入口点等信息。*(.text)表示将所有输入文件中的.text section 的内容合并到这个输出 section 中。</span><br><span class="line"></span><br><span class="line">.rodata ALIGN(4) : &#123;*(.rodata*)&#125;</span><br><span class="line">这一行定义了一个名为.rodata的section，用于存放只读数据（常量）。ALIGN(4)表示这个section的起始地址需要按照4字节对齐。*(.rodata*)表示将所有输入文件中的.rodata或.rodata.*（以.rodata开头的任意子串）的内容合并到这个输出 section 中。</span><br><span class="line"></span><br><span class="line">.data : &#123;*(.data)&#125;</span><br><span class="line">这一行定义了一个名为.data的section，用于存放程序的已初始化数据。*(.data)表示将所有输入文件中的.data section 的内容合并到这个输出 section 中。</span><br><span class="line"></span><br><span class="line">__bss_start = .;</span><br><span class="line">这一行定义了一个全局变量__bss_start，其值被设置为当前位置标识符.的值。.bss section 包含的是未初始化的全局变量，因此没有具体的内容，只需知道其起始地址即可。</span><br><span class="line"></span><br><span class="line">.bss ALIGN(4) : &#123;*(.bss) *(COMMON)&#125;</span><br><span class="line">这里定义了一个名为.bss的section，用于存放未初始化的全局变量。ALIGN(4)表示这个section的起始地址需要按照4字节对齐。*(.bss)表示将所有输入文件中的.bss section 的内容合并到这个输出 section 中，*(COMMON)表示将所有输入文件中的COMMON section 的内容也合并到这个输出 section 中。</span><br><span class="line"></span><br><span class="line">__bss_end = .;</span><br><span class="line">这一行定义了一个全局变量__bss_end，其值被设置为当前位置标识符.的值。这样就记录了.bss section 的结束地址。</span><br></pre></td></tr></table></figure>

<h2 id="3-使用stm32驱动格式编写"><a href="#3-使用stm32驱动格式编写" class="headerlink" title="3. 使用stm32驱动格式编写"></a>3. 使用stm32驱动格式编写</h2><h3 id="驱动开发"><a href="#驱动开发" class="headerlink" title="驱动开发"></a>驱动开发</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1-》驱动文件添加清除bss段代码</span><br><span class="line">	1-》BSS段是存放未初始化的全局变量和静态变量的内存区域，在程序启动时需要进行清零操作，否则其中的数据将会是未知的随机值可能导致系统运行异常甚至崩溃</span><br><span class="line">	2-》在Linux环境下，通常由操作系统负责初始化BSS段，但在嵌入式系统中，特别是在裸机开发或者使用RTOS的情况下，没有操作系统来帮助初始化BSS段，需要手		动进行清零操作。</span><br><span class="line">	3-》STM32芯片通常是在裸机或者嵌入式系统中使用，因此需要在启动代码或初始化代码中手动对BSS段进行清零操作，以确保全局变量和静态变量的初始值为零。</span><br><span class="line">2-》添加寄存器结构体</span><br><span class="line">	寄存器地址如果不连续，则添加占位，占位形式为创建几个保留的无用寄存器(数组)，直到连续</span><br><span class="line">3-》驱动修改</span><br></pre></td></tr></table></figure>

<h3 id="3-1-驱动文件"><a href="#3-1-驱动文件" class="headerlink" title="3.1. 驱动文件"></a>3.1. 驱动文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">    添加對於bss段的清除</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">.global _start</span><br><span class="line"></span><br><span class="line">@声明 _bss_start 符号为全局可见，并在内存中分配一个字（word）的空间，该空间初始化为 __bss_start 符号的值</span><br><span class="line">.global _bss_start</span><br><span class="line">_bss_start:</span><br><span class="line">    .word __bss_start</span><br><span class="line"></span><br><span class="line">@声明 _bss_end 符号为全局可见，并在内存中分配一个字的空间，该空间初始化为 __bss_end 符号的值</span><br><span class="line">.global _bss_end</span><br><span class="line">_bss_end:</span><br><span class="line">    .word __bss_end</span><br><span class="line"></span><br><span class="line">_start:</span><br><span class="line">    /*</span><br><span class="line">        功能：設置處理器模式爲SVC模式</span><br><span class="line">        指令含義：</span><br><span class="line">            CPSR：程序狀態寄存器，用於設置處理器模式，其中M[4:0]是處理器模式控制位</span><br><span class="line">            SVC模式下爲：10011（需要注意：不應該變動寄存器的其他位數據，只是將這5位清零再賦值）</span><br><span class="line">      */</span><br><span class="line">    mrs r0, cpsr        @將cpsr寄存器中的數據複製到r0寄存器中</span><br><span class="line">    bic r0, r0, #0x1f   @將r0寄存器中數據的最後5位清零</span><br><span class="line">    orr r0, r0, #0x13   @將r0寄存器中數據的最後5位賦值爲10011</span><br><span class="line">    msr cpsr, r0        @將r0寄存器中的數據複製到cpsr寄存器</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：清除bss段</span><br><span class="line">      */</span><br><span class="line">    ldr r0, _bss_start  @将内存地址 _bss_start 处的值加载到寄存器 r0 中</span><br><span class="line">    ldr r1, _bss_end    @将内存地址 _bss_end 处的值加载到寄存器 r1 中</span><br><span class="line">    mov r2, #0          @将立即数 0 移动到寄存器 r2 中</span><br><span class="line"></span><br><span class="line">bss_loop:</span><br><span class="line">    stmia r0!, &#123;r2&#125;     @将寄存器 r2 中的值存储到内存地址为 r0 的位置，并将 r0 递增4个字节，下一次存储时就会存储到下一个地址</span><br><span class="line">    cmp r0, r1          @比较寄存器 r0 和 r1 中的值。如果 r0 中的值小于或等于 r1 中的值，则条件码寄存器的&quot;小于或等于&quot;标志位被置位</span><br><span class="line">    ble bss_loop        @如果条件码寄存器的&quot;小于或等于&quot;标志位已经设置，则跳转到标记为 bss_loop 的位置继续执行代码</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        功能：設置sp指針的指向位置，並跳轉到c語言main函數</span><br><span class="line">    */</span><br><span class="line">    ldr sp, =0x80200000    @設置棧指針sp</span><br><span class="line">    b main                 @跳轉到main</span><br></pre></td></tr></table></figure>

<h3 id="3-2-库文件"><a href="#3-2-库文件" class="headerlink" title="3.2. 库文件"></a>3.2. 库文件</h3><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    imx6ull的寄存器結構體定義</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    宏定義，定義基地址</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_BASE            ((volatile unsigned int *)0x020c4000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_ANALOG_BASE     ((volatile unsigned int *)0x020c8000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IOMUX_SW_MUX_BASE   ((volatile unsigned int *)0x020e0044)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IOMUX_SW_PAD_BASE   ((volatile unsigned int *)0x020e0204)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1_BASE          ((volatile unsigned int *)0x0209c000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO2_BASE          ((volatile unsigned int *)0x020a0000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO3_BASE          ((volatile unsigned int *)0x020a4000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO4_BASE          ((volatile unsigned int *)0x020a8000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO5_BASE          ((volatile unsigned int *)0x020ac000)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    宏定義，定義外設</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM                 ((CCM_Type *) CCM_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CCM_ANALOG          ((CCM_ANALOG_Type *) CCM_ANALOG_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IOMUX_SW_MUX        ((IOMUX_SW_MUX_Type *)IOMUX_SW_MUX_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IOMUX_SW_PAD        ((IOMUX_SW_PAD_Type *)IOMUX_SW_PAD_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO1               ((GPIO_Type *)GPIO1_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO2               ((GPIO_Type *)GPIO2_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO3               ((GPIO_Type *)GPIO3_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO4               ((GPIO_Type *)GPIO4_BASE)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO5               ((GPIO_Type *)GPIO5_BASE)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    CCM寄存器結構體</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCSR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CACRR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CBCDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CBCMR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSCMR1;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSCMR2;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSCDR1;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CS1CDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CS2CDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CDCDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CHSCCDR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSCDR2;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSCDR3;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED1[<span class="number">2</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CDHIPR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED2[<span class="number">2</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CLPCR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CISR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CIMR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCOSR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CGPR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR0;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR1;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR2;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR3;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR4;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR5;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CCGR6;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED3[<span class="number">1</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CMEOR;</span><br><span class="line">&#125; CCM_Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    CCM_ANALOG寄存器結構體</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ARM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ARM_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ARM_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ARM_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB1;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB1_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB1_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB1_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB2;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB2_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB2_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_USB2_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_SS;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED1[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_NUM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED2[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_SYS_DENOM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED3[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO_NUM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED4[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_AUDIO_DENOM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED5[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO_NUM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED6[<span class="number">3</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_VIDEO_DENOM;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED7[<span class="number">7</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ENET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ENET_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ENET_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PLL_ENET_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_480;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_480_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_480_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_480_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_528;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_528_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_528_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PFD_528_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED8[<span class="number">16</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC0;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC0_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC0_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC0_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC1;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC1_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC1_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC1_TOG;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC2;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC2_SET;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC2_CLR;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> MISC2_TOG;</span><br><span class="line">&#125; CCM_ANALOG_Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    IOMUXC_SW_MUX寄存器結構體</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_MOD;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TMS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TDO;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TDI;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TCK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TRST_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO08;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO09;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART4_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART4_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART5_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART5_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_ER;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_ER;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_ENABLE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_HSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_VSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_RESET;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA08;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA09;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA10;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA11;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA12;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA13;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA14;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA15;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA16;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA17;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA18;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA19;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA20;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA21;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA22;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA23;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_RE_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_WE_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_ALE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_WP_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_READY_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CE0_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CE1_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CLE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DQS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_CMD;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA2;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA3;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_MCLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_PIXCLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_VSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_HSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA07;</span><br><span class="line">&#125; IOMUXC_SW_MUX_Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    IOMUXC_SW_PAD寄存器結構體</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR08;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR09;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR10;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR11;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR12;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR13;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR14;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ADDR15;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_DQM0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_DQM1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_RAS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_CAS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_CS0_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_CS1_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDWE_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ODT0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_ODT1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDBA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDBA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDBA2;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDCKE0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDCKE1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDCLK0_P;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDQS0_P;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_SDQS1_P;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DRAM_RESET;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> RESERVED1[<span class="number">17</span>];  <span class="comment">//保留寄存器，用於地址補全</span></span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_MOD;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TMS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TDO;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TDI;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TCK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> JTAG_TRST_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO08;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GPIO1_IO09;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART1_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART2_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_CTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART3_RTS_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART4_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART4_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART5_TX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> UART5_RX_DATA;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_TX_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET1_RX_ER;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_EN;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_TX_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ENET2_RX_ER;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_ENABLE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_HSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_VSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_RESET;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA08;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA09;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA10;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA11;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA12;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA13;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA14;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA15;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA16;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA17;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA18;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA19;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA20;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA21;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA22;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> LCD_DATA23;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_RE_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_WE_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DATA07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_ALE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_WP_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_READY_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CE0_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CE1_B;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_CLE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> NAND_DQS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_CMD;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_CLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA0;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA1;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA2;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> SD1_DATA3;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_MCLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_PIXCLK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_VSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_HSYNC;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA00;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA01;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA02;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA03;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA04;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA05;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA06;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> CSI_DATA07;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_ADDDS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDRMODE_CTL;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_B0DS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDRPK;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_CTLDS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_B1DS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDRHYS;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDRPKE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDRMODE;</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GRP_DDR_TYPE;</span><br><span class="line">&#125;IOMUX_SW_PAD_Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    GPIO寄存器結構體</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> DR;							</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> GDIR; 							</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> PSR;								</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ICR1; 							</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ICR2; 							 </span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> IMR;								 </span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> ISR;			</span><br><span class="line">	<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> EDGE_SEL;  </span><br><span class="line">&#125;GPIO_Type;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-Makefile"><a href="#3-3-Makefile" class="headerlink" title="3.3. Makefile"></a>3.3. Makefile</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">objs = main.o start.o</span><br><span class="line">gcc = arm-linux-gnueabihf-gcc</span><br><span class="line">ld = arm-linux-gnueabihf-ld</span><br><span class="line">objcopy = arm-linux-gnueabihf-objcopy</span><br><span class="line">objdump = arm-linux-gnueabihf-objdump</span><br><span class="line"></span><br><span class="line">ledc_stm32.bin : $(objs)</span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(ld) -Timx6ull.lds $^ -o ledc_stm32.elf</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(objcopy) -O binary -S -g ledc_stm32.elf <span class="variable">$@</span></span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(objdump) -D -m arm ledc_stm32.elf &gt; ledc_stm32.dis</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o : %.c</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(gcc) -Wall -nostdlib -c $&lt; -o <span class="variable">$@</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o : %.s</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(gcc) -Wall -nostdlib -c $&lt; -o <span class="variable">$@</span></span></span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">	rm -rf *.o ledc_stm32.elf ledc_stm32.bin ledc_stm32.dis</span><br></pre></td></tr></table></figure>

<h2 id="4-官方sdk移植"><a href="#4-官方sdk移植" class="headerlink" title="4. 官方sdk移植"></a>4. 官方sdk移植</h2><h3 id="移植步骤"><a href="#移植步骤" class="headerlink" title="移植步骤"></a>移植步骤</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1-》新建cc.h文件</span><br><span class="line">	sdk中会用到许多数据类型，需要在cc.h中定义</span><br><span class="line">2-》移植文件fsl_common.h\fsl_iomuxc.h\MCIMX6Y2.h</span><br></pre></td></tr></table></figure>

<h2 id="5-BSP工程管理"><a href="#5-BSP工程管理" class="headerlink" title="5. BSP工程管理"></a>5. BSP工程管理</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">根目录</span><br><span class="line">	-BSP		--存放驱动文件，eg. clk\delay\led</span><br><span class="line">	-imx6ull	--存放芯片相关库文件</span><br><span class="line">	-obj		--编译过程生成的文件，eg. .o\.elf\.bin\.dis</span><br><span class="line">	-project	--工程文件</span><br><span class="line">	-SI			--source insight工程</span><br><span class="line">	-.vscode	--配置项目的库文件所在目录(includepath)</span><br></pre></td></tr></table></figure>

<h3 id="5-1-通用Makefile"><a href="#5-1-通用Makefile" class="headerlink" title="5.1. 通用Makefile"></a>5.1. 通用Makefile</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">CROSS_COMPILE	:= arm-linux-gnueabihf-</span><br><span class="line">TARGET			:= ledc_bsp</span><br><span class="line"></span><br><span class="line">CC				:= $(CROSS_COMPILE)gcc</span><br><span class="line">LD				:= $(CROSS_COMPILE)ld</span><br><span class="line">OBJCOPY			:= $(CROSS_COMPILE)objcopy</span><br><span class="line">OBJDUMP			:= $(CROSS_COMPILE)objdump</span><br><span class="line"></span><br><span class="line">INCLUDEDIRS		:= imx6ull	\</span><br><span class="line">				   bsp/clk	\</span><br><span class="line">				   bsp/led	\</span><br><span class="line">				   bsp/delay</span><br><span class="line"></span><br><span class="line">SRCDIRS			:= project	\</span><br><span class="line">				   bsp/clk	\</span><br><span class="line">				   bsp/led	\</span><br><span class="line">				   bsp/delay</span><br><span class="line"></span><br><span class="line">INCLUDE			:= $(patsubst %, -I %, $(INCLUDEDIRS))</span><br><span class="line"></span><br><span class="line">SFILES			:= $(foreach dir, $(SRCDIRS), $(wildcard $(dir)/*.s))</span><br><span class="line">CFILES			:= $(foreach dir, $(SRCDIRS), $(wildcard $(dir)/*.c))</span><br><span class="line"></span><br><span class="line">SFILENDIR		:= $(notdir $(SFILES))</span><br><span class="line">CFILENDIR		:= $(notdir $(CFILES))</span><br><span class="line"></span><br><span class="line">SOBJS			:= $(patsubst %, obj/%, $(SFILENDIR:.s=.o))//SFILENDIR:.s=.o这儿不能有空格，否则会失败</span><br><span class="line">COBJS			:= $(patsubst %, obj/%, $(CFILENDIR:.c=.o))</span><br><span class="line">OBJS			:= $(SOBJS) $(COBJS)</span><br><span class="line"></span><br><span class="line">VPATH			:= $(SRCDIRS)</span><br><span class="line"></span><br><span class="line">.PHONY : clean</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(TARGET).bin : $(OBJS)</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(LD) -Timx6ull.lds $^ -o $(TARGET).elf</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(OBJCOPY) -O binary -S -g $(TARGET).elf <span class="variable">$@</span></span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(OBJDUMP) -D -m arm $(TARGET).elf &gt; $(TARGET).dis</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(SOBJS) : obj/%.o : %.s</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(CC) -Wall -nostdlib -O2 -c $(INCLUDE) $&lt; -o <span class="variable">$@</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(COBJS) : obj/%.o : %.c</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(CC) -Wall -nostdlib -O2 -c $(INCLUDE) $&lt; -o <span class="variable">$@</span></span></span><br><span class="line"></span><br><span class="line">clean :</span><br><span class="line">	rm -rf $(TARGET).elf $(TARGET).dis $(TARGET).bin $(SOBJS) $(COBJS)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-蜂鸣器"><a href="#6-蜂鸣器" class="headerlink" title="6. 蜂鸣器"></a>6. 蜂鸣器</h2><h3 id="6-1-基本流程"><a href="#6-1-基本流程" class="headerlink" title="6.1. 基本流程"></a>6.1. 基本流程</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1-》初始化SNVS_TAMPER1，复用为GPIO5_IO01</span><br><span class="line">2-》设置GPIO电气属性</span><br><span class="line">3-》初始化GPIO</span><br><span class="line">4-》控制GPIO输出</span><br></pre></td></tr></table></figure>

<h3 id="6-2-代码编写"><a href="#6-2-代码编写" class="headerlink" title="6.2. 代码编写"></a>6.2. 代码编写</h3><h4 id="c-cpp-properties-json"><a href="#c-cpp-properties-json" class="headerlink" title="c_cpp_properties.json"></a>c_cpp_properties.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;includePath&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/bsp/clk&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/bsp/delay&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/bsp/led&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/bsp/beep&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/imx6ull&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/project&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h4 id="beep-h"><a href="#beep-h" class="headerlink" title="beep.h"></a>beep.h</h4><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __BSP_BEEP_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __BSP_BEEP_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;fsl_iomuxc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MCIMX6Y2.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    函數聲明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">beep_init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">beep_switch</span><span class="params">(<span class="type">int</span> status)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// !__BSP_BEEP_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="beep-c"><a href="#beep-c" class="headerlink" title="beep.c"></a>beep.c</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bsp_beep.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">beep_init</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    IOMUXC_SetPinMux(IOMUXC_SNVS_SNVS_TAMPER1_GPIO5_IO01, <span class="number">0</span>);</span><br><span class="line">    IOMUXC_SetPinConfig(IOMUXC_SNVS_SNVS_TAMPER1_GPIO5_IO01, <span class="number">0x10B0</span>);</span><br><span class="line"></span><br><span class="line">    GPIO5-&gt;GDIR |= (<span class="number">1</span>&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//默認關閉蜂鳴器</span></span><br><span class="line">    GPIO5-&gt;DR |= (<span class="number">1</span>&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">beep_switch</span><span class="params">(<span class="type">int</span> status)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (status)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> ON:</span><br><span class="line">            GPIO5-&gt;DR &amp;= ~(<span class="number">1</span>&lt;&lt;<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> OFF:</span><br><span class="line">            GPIO5-&gt;DR |= (<span class="number">1</span>&lt;&lt;<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-按键输入"><a href="#7-按键输入" class="headerlink" title="7. 按键输入"></a>7. 按键输入</h2><h3 id="7-1-基本流程"><a href="#7-1-基本流程" class="headerlink" title="7.1. 基本流程"></a>7.1. 基本流程</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1-》UART1_CTS控制按键，复用为GPIO1_IO18</span><br><span class="line">2-》设置电气属性</span><br><span class="line">	输入模式下，关闭输出，关闭驱动能力，设置22k上拉电阻</span><br><span class="line">3-》配置输入输出模式</span><br><span class="line">4-》读取输入</span><br></pre></td></tr></table></figure>

<h3 id="7-2-代码编写"><a href="#7-2-代码编写" class="headerlink" title="7.2. 代码编写"></a>7.2. 代码编写</h3><h4 id="通用GPIO代码"><a href="#通用GPIO代码" class="headerlink" title="通用GPIO代码"></a>通用GPIO代码</h4><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __BSP_GPIO_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __BSP_GPIO_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;fsl_iomuxc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MCIMX6Y2.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    枚舉類型與結構體定義</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span> _<span class="title">gpio_pin_direction</span>&#123;</span></span><br><span class="line">    kGPIO_DigitalInput = <span class="number">0</span>,</span><br><span class="line">    kGPIO_DigitalOutput = <span class="number">1</span>,</span><br><span class="line">&#125; <span class="type">gpio_pin_direction_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">gpio_pin_config</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">gpio_pin_direction_t</span> direction; <span class="comment">//GPIO方向：輸入/輸出</span></span><br><span class="line">    <span class="type">uint8_t</span> outputLogic;            <span class="comment">//默認輸出電平</span></span><br><span class="line">&#125; <span class="type">gpio_pin_config_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函數聲明</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">gpio_init</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin, <span class="type">gpio_pin_config_t</span> *config)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">gpio_pinread</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">gpio_pinwrite</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin, <span class="type">int</span> value)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// !__BSP_GPIO_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bsp_gpio.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">gpio_init</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin, <span class="type">gpio_pin_config_t</span> *config)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (config-&gt;direction == kGPIO_DigitalInput)</span><br><span class="line">    &#123;</span><br><span class="line">        base-&gt;GDIR &amp;= ~(<span class="number">1</span>&lt;&lt;pin);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(config-&gt;direction == kGPIO_DigitalOutput)</span><br><span class="line">    &#123;</span><br><span class="line">        base-&gt;GDIR |= (<span class="number">1</span>&lt;&lt;pin);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            設置默認輸出電平</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       gpio_pinwrite(base, pin, config-&gt;outputLogic);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">gpio_pinread</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((base-&gt;DR &gt;&gt; pin) &amp;<span class="number">0x1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">gpio_pinwrite</span><span class="params">(GPIO_Type *base, <span class="type">int</span> pin, <span class="type">int</span> value)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="number">0U</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        base-&gt;DR &amp;= ~(<span class="number">1</span>&lt;&lt;pin);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">1U</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        base-&gt;DR |= (<span class="number">1</span>&lt;&lt;pin);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="按键代码"><a href="#按键代码" class="headerlink" title="按键代码"></a>按键代码</h4><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __BSP_KEY_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __BSP_KEY_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;fsl_iomuxc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MCIMX6Y2.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bsp_gpio.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    按鍵枚舉</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">key_value</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    KEY_NONE = <span class="number">0</span>,</span><br><span class="line">    KEY0_VALUE,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    函數聲明</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">key_init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">key_get_value</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// !__BSP_KEY_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bsp_key.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bsp_delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">key_init</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">gpio_pin_config_t</span> key_config;</span><br><span class="line"></span><br><span class="line">    IOMUXC_SetPinMux(IOMUXC_UART1_CTS_B_GPIO1_IO18, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        bit0: 0 低壓擺率</span></span><br><span class="line"><span class="comment">        bit3:5: 000 關閉輸出驅動</span></span><br><span class="line"><span class="comment">        bit6:7: 10 中速100MHz</span></span><br><span class="line"><span class="comment">        bit11: 0 關閉開漏</span></span><br><span class="line"><span class="comment">        bit12: 1 使能上下拉/狀態保持器</span></span><br><span class="line"><span class="comment">        bit13: 1 選擇上下拉電阻</span></span><br><span class="line"><span class="comment">        bit14:15: 11 22k上拉電阻</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    IOMUXC_SetPinConfig(IOMUXC_UART1_CTS_B_GPIO1_IO18, <span class="number">0xf080</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//設置爲輸入模式</span></span><br><span class="line">    key_config.direction = kGPIO_DigitalInput;</span><br><span class="line">    <span class="comment">//默認保持爲高電平，此時按鍵斷開</span></span><br><span class="line">    gpio_init(GPIO1, <span class="number">18</span>, &amp;key_config);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">key_get_value</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">unsigned</span> <span class="type">char</span> release = <span class="number">1</span>;   <span class="comment">/* 1表示按鍵已經釋放 */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (release==<span class="number">1</span> &amp;&amp; (gpio_pinread(GPIO1, <span class="number">18</span>))==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delay(<span class="number">10</span>);</span><br><span class="line">        release = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((gpio_pinread(GPIO1, <span class="number">18</span>)) == <span class="number">0</span>)    <span class="comment">/* 如果10ms以後，按鍵仍然是按下狀態，則說明按鍵有效*/</span></span><br><span class="line">        &#123;</span><br><span class="line">            ret = KEY0_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ((gpio_pinread(GPIO1, <span class="number">18</span>)) == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ret = KEY_NONE;</span><br><span class="line">        release = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-问题解决"><a href="#7-3-问题解决" class="headerlink" title="7.3. 问题解决"></a>7.3. 问题解决</h3><h4 id="清除BSS段的代码会导致程序卡死"><a href="#清除BSS段的代码会导致程序卡死" class="headerlink" title="清除BSS段的代码会导致程序卡死"></a>清除BSS段的代码会导致程序卡死</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">__bss_start在不进行4字节对齐的情况下，__bss_start可能=0x87800289</span><br><span class="line">但是</span><br><span class="line">	芯片处理的时候，一般情况下是按照4字节访问的，即0x0,0x4,0x8,0xc</span><br><span class="line">	因此芯片会从0x87800288开始擦除bss段</span><br><span class="line">	但是0x87800288并不属于bss段，这样的情况下会导致擦除掉数据，以至于程序崩溃</span><br><span class="line"></span><br><span class="line">所以解决办法为</span><br><span class="line">	在链接文件中分配bss段的数据之前，进行一次4字节对齐，从0x8780028c</span><br></pre></td></tr></table></figure>

<h5 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h5><p>imx6ull.lds</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SECTIONS&#123;</span><br><span class="line">    . = 0x87800000;</span><br><span class="line">    .text : &#123;</span><br><span class="line">        obj/start.o</span><br><span class="line">        *(.text)</span><br><span class="line">    &#125;</span><br><span class="line">    .rodata ALIGN(4) : &#123;*(.rodata)&#125;</span><br><span class="line">    .data ALIGN(4) : &#123;*(.data)&#125;</span><br><span class="line">    . = ALIGN(4);	//新增这个进行字节对齐</span><br><span class="line">    __bss_start = .;</span><br><span class="line">    .bss ALIGN(4) : &#123;*(.bss) *(COMMON)&#125;</span><br><span class="line">    __bss_end = .;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="新增GPIO通用接口之后，会导致-bss-start和-bss-end无法识别-原理未知"><a href="#新增GPIO通用接口之后，会导致-bss-start和-bss-end无法识别-原理未知" class="headerlink" title="新增GPIO通用接口之后，会导致_bss_start和 _bss_end无法识别(原理未知)"></a>新增GPIO通用接口之后，会导致_bss_start和 _bss_end无法识别(原理未知)</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">常规情况下，反汇编之后的代码应该是strhi	r0, [r0, r4, asr #3]</span><br><span class="line">87800000 &lt;_bss_start&gt;:</span><br><span class="line">87800000:	878001c4 	strhi	r0, [r0, r4, asr #3]</span><br><span class="line"></span><br><span class="line">87800004 &lt;_bss_end&gt;:</span><br><span class="line">87800004:	878001c4 	strhi	r0, [r0, r4, asr #3]</span><br><span class="line"></span><br><span class="line">但新增之后，反汇编的代码是undefined</span><br><span class="line">87800000 &lt;_bss_start&gt;:</span><br><span class="line">87800000:	878002d8 			; &lt;UNDEFINED&gt; instruction: 0x878002d8</span><br><span class="line"></span><br><span class="line">87800004 &lt;_bss_end&gt;:</span><br><span class="line">87800004:	878002d8 			; &lt;UNDEFINED&gt; instruction: 0x878002d8</span><br></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字节未对齐，调整函数，删除read_key()函数，用gpio_pinread()即可</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/12/01/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/linux_arm%E8%A3%B8%E6%9C%BA/" rel="prev" title="嵌入式linux入门(二)：linux-ARM裸机">
                  <i class="fa fa-chevron-left"></i> 嵌入式linux入门(二)：linux-ARM裸机
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/12/08/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91%E7%BB%AD1/" rel="next" title="嵌入式linux入门(三)：linux-ARM裸机二">
                  嵌入式linux入门(三)：linux-ARM裸机二 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WxjYBX</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  




  




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"http://example.com/2023/12/04/%E5%B5%8C%E5%85%A5%E5%BC%8F/linux/%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90/I.MX6ULL%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
